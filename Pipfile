[[source]]
url = "https://pypi.org/simple"
verify_ssl = true
name = "pypi"

[packages]
jsonschema = "==4.17.3"
mypy = "==1.3.0"
gitpython = "==3.1.31"
"ruamel.yaml" = "==0.17.21"
kubernetes = "==25.3.0"
junitparser = "==2.8.0"
pyjwt = "==2.5.0" # forced downgrade due to https://stackoverflow.com/questions/33198428/jwt-module-object-has-no-attribute-encode
cryptography = "==39.0.2"
python-on-whales = "==0.60.1"
pygithub = "==1.58.2"
slack-sdk = "==3.21.3"
atlassian-python-api = "==3.37.0"
click = "==8.1.3"
rich = "==13.3.5"
jenkinsapi = "==0.3.13"
pyaml-env = "==1.2.1"
aiohttp = "==3.8.4"
python-dotenv = "==1.0.0"
questionary = "==1.10.0"
toml = "==0.10.2"
boto3 = "==1.26.140"

[dev-packages]
types-jsonschema = "==4.17.0.1"
types-pyyaml = "==6.0.12.2"
types-requests = "==2.28.2"
twine = "==4.0.1"
types-six = "==1.16.21.4"
dagit = "==1.2.6"
dagster = "==1.2.6"
pylint = "==2.17.0"
pytest = "==7.2.1"
pdoc = "==13.1.1"
sqlalchemy = "<2.0.0" # forced downgrade https://github.com/dagster-io/dagster/discussions/11881
coverage = "==7.2.2"
'black[d]' = "==23.3.0"
black = "==23.3.0"

[requires]
python_version = "3.9"

[scripts]
cli = "python src/mpyl/__main__.py"
cli-ext = "bash -c \"python $(dirname \\$PIPENV_PIPFILE)/src/mpyl/__main__.py $(echo $0) $(echo $@)\""
build = "python setup.py bdist_wheel"
create-graph = "pyreverse -o png src/mpyl"
lint = "pylint --rcfile .pylintrc src/"
format = "black --check --diff . --exclude venv|build/lib"
format-update = "black . --exclude venv|build/lib"
test = "pytest -W ignore::pytest.PytestCollectionWarning"
test-ci = "coverage run -m pytest --junitxml=build/test-result/test.xml"
test-ci-coverage = "coverage xml -o build/coverage.xml"
doc = "python -m pdoc -d restructuredtext -o docs/ src/mpyl"
doc-preview = "python -m pdoc -d restructuredtext src/mpyl"
check-types = "mypy --explicit-package-bases src/mpyl/"
validate = "bash -c 'black --check --diff . && mypy --explicit-package-bases src/mpyl/ && pytest -W ignore::pytest.PytestCollectionWarning && pylint src/'"
validate-config-example = "python validate-config-example.py"
install-types = "mypy --install-types --non-interactive src/mpyl/  "
run = "python mpyl-example.py --local --dryrun --all"
run-ci = "python mpyl-example.py"
run-dagster-ci = "python mpyl-dagster-example.py"
run-dagit = "dagit --workspace workspace.yml"
publish = "twine upload --comment \\\"${TWINE_COMMENT}\\\" --skip-existing --verbose dist/*"
