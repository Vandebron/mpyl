[[source]]
url = "https://pypi.org/simple"
verify_ssl = true
name = "pypi"

[packages]
jsonschema = "==4.17.3"
mypy = "==1.5.1"
"ruamel.yaml" = "==0.17.21"
kubernetes = "==27.2.0"
junitparser = "==2.8.0"
pyjwt = "==2.5.0" # forced downgrade due to https://stackoverflow.com/questions/33198428/jwt-module-object-has-no-attribute-encode
python-on-whales = "==0.72.0"
gitpython = "==3.1.36"
click = "==8.1.7"
rich = "==13.5.2"
pyaml-env = "==1.2.1"
aiohttp = "==3.8.5"
python-dotenv = "==1.0.0"
toml = "==0.10.2"
boto3 = "==1.26.140"
deepdiff = "==6.4.1"
requests = "==2.31.0"

[dev-packages]
types-jsonschema = "==4.17.0.1"
types-pyyaml = "==6.0.12.2"
types-requests = "==2.28.2"
twine = "==4.0.1"
types-six = "==1.16.21.4"
dagit = "==1.2.6"
dagster = "==1.2.6"
pylint = "==2.17.0"
pytest = "==7.2.1"
pytest-xdist = "==3.3.1"
pdoc = "==14.0.0"
sqlalchemy = "<2.0.0" # forced downgrade https://github.com/dagster-io/dagster/discussions/11881
coverage = "==7.2.2"
'black[d]' = "==23.3.0"
black = "==23.3.0"

[requires]
python_version = "3.9"

[scripts]
cli = "python src/mpyl/__main__.py"
cli-ext = "bash -c \"python $(dirname \\$PIPENV_PIPFILE)/src/mpyl/__main__.py $(echo $0) $(echo $@)\""
build = "python setup.py bdist_wheel"
create-graph = "pyreverse -o png src/mpyl"
lint = "pylint --rcfile .pylintrc src/"
lint-test = "pylint --rcfile .pylintrc-test tests/"
format = "black --check --config pyproject.toml --diff . --exclude venv|build/lib"
format-update = "black .  --config pyproject.toml --exclude venv|build/lib"
test = "pytest -n 4 -W ignore::pytest.PytestCollectionWarning -v tests"
test-coverage = "bash -c 'coverage run -m pytest -v tests && coverage report -m --sort cover'"
test-ci = "coverage run -m pytest --junitxml=build/test-result/test.xml"
test-ci-coverage = "coverage xml -o build/coverage.xml"
doc = "python -m pdoc -d restructuredtext -o docs/ --favicon https://user-images.githubusercontent.com/1911436/266026788-9c1955a3-3bb4-4372-b8dd-fecc06b8295c.png --logo https://user-images.githubusercontent.com/1911436/266025430-b2cb6249-39e4-4441-b436-5015ad677716.png src/mpyl"
doc-preview = "python -m pdoc -d restructuredtext --favicon https://user-images.githubusercontent.com/1911436/266026788-9c1955a3-3bb4-4372-b8dd-fecc06b8295c.png --logo https://user-images.githubusercontent.com/1911436/266025430-b2cb6249-39e4-4441-b436-5015ad677716.png src/mpyl"
check-types = "mypy --explicit-package-bases --check-untyped-defs src/mpyl/"
check-types-test = "mypy --no-incremental --explicit-package-bases --check-untyped-defs tests/"
validate = "python validate.py"
validate-config-example = "python validate-config-example.py"
install-types = "mypy --install-types --non-interactive src/mpyl/  "
release = "python release.py"
run = "python mpyl-example.py --local --dryrun --all"
run-ci = "python mpyl-example.py"
run-dagster-ci = "python mpyl-dagster-example.py"
run-dagit = "dagit --workspace workspace.yml"
publish = "twine upload --comment \\\"${TWINE_COMMENT}\\\" --skip-existing --verbose dist/*"
start-github-status-check = "python mpyl-github-status-check.py"
